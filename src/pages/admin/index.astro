---
import DashboardLayout from '@layouts/DashboardLayout.astro'
import AdminDashboard from '@components/admin/AdminDashboard.svelte'
import { isSudo, isAdmin } from '@lib/auth'

const user = Astro.locals.user!
if (!isAdmin(user)) {
  return Astro.redirect('/dashboard')
}
---

<DashboardLayout
  metadata={{
    title: 'Panel de administración',
    description: 'Panel de administración de AJPC',
  }}
>
  <AdminDashboard
    client:only="svelte"
    isSudo={isSudo(user)}
    userRole={user.role}
  />
</DashboardLayout>

<style></style>
